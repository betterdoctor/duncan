

# deployment
`import "github.com/betterdoctor/duncan/deployment"`

* [Overview](#pkg-overview)
* [Index](#pkg-index)

## <a name="pkg-overview">Overview</a>



## <a name="pkg-index">Index</a>
* [func AllowedToManage(app, env string) (bool, error)](#AllowedToManage)
* [func BeginDeploy(app, env string) error](#BeginDeploy)
* [func CurrentTag(app, env string) (string, error)](#CurrentTag)
* [func FinishDeploy(app, env string) error](#FinishDeploy)
* [func GithubDiffLink(app, prev, tag string) string](#GithubDiffLink)
* [func MarathonGroupID(app, env string) string](#MarathonGroupID)
* [func UpdateReleaseTags(app, env, tag, prev string) error](#UpdateReleaseTags)
* [func Watch(id string) error](#Watch)
* [type Deployment](#Deployment)
* [type Event](#Event)


#### <a name="pkg-files">Package files</a>
[events.go](/src/github.com/betterdoctor/duncan/deployment/events.go) [utils.go](/src/github.com/betterdoctor/duncan/deployment/utils.go) 





## <a name="AllowedToManage">func</a> [AllowedToManage](/src/target/utils.go?s=378:429#L15)
``` go
func AllowedToManage(app, env string) (bool, error)
```
AllowedToManage checks if user is able to manage/deploy
an app/env



## <a name="BeginDeploy">func</a> [BeginDeploy](/src/target/utils.go?s=1271:1310#L52)
``` go
func BeginDeploy(app, env string) error
```
BeginDeploy checks if Consul ACL allows deployments for



## <a name="CurrentTag">func</a> [CurrentTag](/src/target/utils.go?s=4974:5022#L199)
``` go
func CurrentTag(app, env string) (string, error)
```
CurrentTag returns the currently deployed git tag for an app and environment



## <a name="FinishDeploy">func</a> [FinishDeploy](/src/target/utils.go?s=2202:2242#L86)
``` go
func FinishDeploy(app, env string) error
```
FinishDeploy removes deployment lock after a successful deploy



## <a name="GithubDiffLink">func</a> [GithubDiffLink](/src/target/utils.go?s=5630:5679#L222)
``` go
func GithubDiffLink(app, prev, tag string) string
```
GithubDiffLink returns a GitHub diff link to view deployment changes



## <a name="MarathonGroupID">func</a> [MarathonGroupID](/src/target/utils.go?s=5456:5500#L217)
``` go
func MarathonGroupID(app, env string) string
```
MarathonGroupID returns a Marathon Group id for an app and env



## <a name="UpdateReleaseTags">func</a> [UpdateReleaseTags](/src/target/utils.go?s=4021:4077#L160)
``` go
func UpdateReleaseTags(app, env, tag, prev string) error
```
UpdateReleaseTags updates the deployment git tags in Consul KV registry
`tags/{app}/{env}/current` points to the currently deployed tag
`tags/{app}/{env}/previous` points to the previously deployed tag

### This structure allows for rollback if a previous tag exists
Returns previously deployed git tag if one has been deployed



## <a name="Watch">func</a> [Watch](/src/target/utils.go?s=2977:3004#L117)
``` go
func Watch(id string) error
```
Watch watches a Marathon deployment and handles success or failure




## <a name="Deployment">type</a> [Deployment](/src/target/utils.go?s=254:303#L9)
``` go
type Deployment struct {
    ID string `json:"id"`
}
```
Deployment represents a Marathon deployment










## <a name="Event">type</a> [Event](/src/target/events.go?s=220:309#L1)
``` go
type Event struct {
    App      string
    Env      string
    Deployer string
    Type     string
}
```
Event represents an individual deployment event

For example:
- deployment of new version
- manual scale up/down
- update to env/secrets
- update to application autoscaling policy














- - -
Generated by [godoc2md](http://godoc.org/github.com/davecheney/godoc2md)
